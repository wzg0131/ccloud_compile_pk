(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/QYs":function(n,l,t){"use strict";t.d(l,"a",function(){return e});class e{constructor(n){this.reasons=n.reasons}ngOnInit(){}}},"/xxR":function(n,l,t){"use strict";t.d(l,"a",function(){return e});class e{}},Hsfn:function(n,l,t){"use strict";t.d(l,"a",function(){return a});var e=t("kJ5x"),i=t("AytR"),u=t("8Y7J");const a=(()=>{class n{constructor(n){this.http=n,this.url=i.a.apiEndpoint+"/wp-json/led/v2/monitor/limit"}getAlarm(n){return this.http.get(this.url,{led_id:n})}updateAlarm(n,l){return this.http.put(this.url,l,{led_id:n})}}return n.ngInjectableDef=u.Qb({factory:function(){return new n(u.Ub(e.a))},token:n,providedIn:"root"}),n})()},KKQO:function(n,l,t){"use strict";var e=t("8Y7J"),i=t("TSSN"),u=t("SVse"),a=t("igqZ"),o=t("oJZn"),r=t("pBi1"),s=t("5GAg"),c=t("omvX"),d=t("IP0z"),b=t("s7LF"),m=t("Q1xG"),p=t("Cl/c"),h=t("q8To"),g=t("Hsfn");const f={ErrorRate:["MONITOR.ERROR_REASONS.BIT_ERROR_RATE.DAMAGED_NETWORK_CABLE","MONITOR.ERROR_REASONS.BIT_ERROR_RATE.DISCONNECTED","MONITOR.ERROR_REASONS.BIT_ERROR_RATE.HIGH_BIT_ERROR_RATE"],temperature:["MONITOR.ERROR_REASONS.RECEIVER_TEMP.TOO_MUCH_HEAT_DISSIPATION","MONITOR.ERROR_REASONS.RECEIVER_TEMP.TEMPERATURE_IS_TOO_HIGH"],humidity:["MONITOR.ERROR_REASONS.RECEIVER_HUMIDITY.AMBIENT_HUMIDITY_TOO_HIGH","MONITOR.ERROR_REASONS.RECEIVER_HUMIDITY.HAS_STAGNANT_WATER","MONITOR.ERROR_REASONS.RECEIVER_HUMIDITY.OUTSIDE_RAINY"],smoke:["MONITOR.ERROR_REASONS.SENSOR_SMOKE.SMOKE_OUTSIDE","MONITOR.ERROR_REASONS.SENSOR_SMOKE.SMOKE_PROBE"]};class O{constructor(n,l){this.monitorService=n,this.alarmService=l,this.outData=new e.m,this.outLimit=!1,this.query={deadline:"day"},this.sensorType=h.a.ERROR_RATE,this.receiveCardOption=this.initOption({charts:{},total:0},"line")}ngOnInit(){this.terminal&&this.terminal.monitor&&!1!==this.terminal.monitor||(this.noMonitor=!0)}onChartInit(n){this.recInstance=n,this.draw()}initOption(n,l={}){return{xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]}}draw(){this.terminal&&this.recInstance&&(this.recInstance.showLoading("default",{text:"loading",zlevel:1}),this.monitorService.get(this.terminal.id,this.query,this.sensorType).subscribe(n=>{this.format(n.body.data),this.recInstance.hideLoading()}))}format(n){this.formatCardInfo(n.bitErrorRate)}formatCardInfo(n){if(n){const l={};for(const t in n)n.hasOwnProperty(t)&&(l[t]=n[t].error_rate);this.initReceiveCard(l)}}initReceiveCard(n){n=this.monitorService.filter(n,21);const l=new Set,t=[];for(const u in n)if(n.hasOwnProperty(u)){const e={name:u,type:"line",data:[],smooth:!0};if(Array.isArray(n[u])){const l=n[u][n[u].length-1],t=h.a.ERROR_RATE;l&&l.length>=2&&parseInt(l[1],10)>15&&(this.outLimit=!0,this.outData.emit({id:this.terminal.id,reasons:this.getReasons(t)}))}for(const t of n[u])l.add(t[0]),e.data.push(t[1]);t.push(e)}let e={tooltip:{trigger:"axis",backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"}},grid:{width:220,height:100,left:25,top:10},xAxis:{type:"category",boundaryGap:!1,data:Array.from(l),show:!1},yAxis:{type:"value",show:!0,max:25},series:t};this.noData=!1,t.length<=0&&(e={},this.noData=!0);let i=!1;for(const u of t)u.data.length>0&&(i=!0);i||(e={},this.noData=!0),this.recInstance&&this.recInstance.setOption(e,{notMerge:!0}),this.updateErrorStatus(n)}getReasons(n){let l;if(n)switch(n){case h.a.ERROR_RATE:l=f[h.a.ERROR_RATE];break;case h.a.TEMPERATURE:l=f[h.a.TEMPERATURE];break;case h.a.HUMIDITY:l=f[h.a.HUMIDITY];break;case h.a.SMOKE:l=f[h.a.SMOKE];break;default:l=[]}return l}getThreshold(n,l,t){const e=(((n||{})[l]||{}).values||{})[t];return(((n||{})[l]||{}).enableds||{})[t]&&"number"==typeof e?e:void 0}updateErrorStatus(n){this.alarmService.getAlarm(this.terminal.id).subscribe(l=>{const t=this.getThreshold(l.body.data,"Bit_Error_Rate","Critical");for(const e in n)if(n.hasOwnProperty(e)&&Array.isArray(n[e])){const l=n[e][n[e].length-1],i=h.a.ERROR_RATE;if(l&&l.length>=2){const n=l[1];"number"==typeof t&&parseInt(n,10)>t&&(this.outLimit=!0,this.outData.emit({id:this.terminal.id,reasons:this.getReasons(i)}))}}})}}var E=e.sb({encapsulation:0,styles:[[".mini-chart[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}"]],data:{}});function R(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,2,"div",[["style","position: absolute;top:0;left:20px;"]],null,null,null,null,null)),(n()(),e.Mb(1,null,["",""])),e.Gb(131072,i.i,[i.j,e.h])],null,function(n,l){n(l,1,0,e.Nb(l,1,0,e.Eb(l,2).transform("MONITOR.NO_DATA")))})}function M(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,4,"div",[["class","mini-chart"]],null,null,null,null,null)),(n()(),e.ub(1,0,null,null,1,"div",[["class","demo-chart"],["echarts",""],["style","width:250px;height:120px;"],["theme","macarons"]],null,[[null,"chartInit"]],function(n,l,t){var e=!0;return"chartInit"===l&&(e=!1!==n.component.onChartInit(t)&&e),e},null,null)),e.tb(2,5193728,null,0,m.b,[e.k,e.y],{options:[0,"options"],theme:[1,"theme"]},{chartInit:"chartInit"}),(n()(),e.jb(16777216,null,null,1,null,R)),e.tb(4,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,2,0,t.receiveCardOption,"macarons"),n(l,4,0,t.noData)},null)}var I=t("JDDX");class _{constructor(n){this.flowService=n,this.feeOption=this.initOption({charts:{},total:0},"line")}ngOnInit(){this.terminal&&this.terminal.flowfee&&!1!==this.terminal.flowfee||(this.noFlowfee=!0)}onChartInit(n){this.feeInstance=n,this.draw()}initOption(n,l={}){return{series:[{type:"pie"}]}}draw(){this.terminal&&this.feeInstance&&(this.feeInstance.showLoading("default",{text:"loading",zlevel:1}),this.flowService.getFlow(this.terminal.id).subscribe(n=>{this.feeInstance.hideLoading(),this.initChart(n.body.data)}))}initChart(n){const l={grid:{left:-40},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",position:[160,40]},series:[{name:"\u8ba1\u8d39",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"10"}}},labelLine:{normal:{show:!1}},data:this.filterFee(n)}]};this.noFlowfee||(l.title=[{text:"Playlist played today",left:"35%",textStyle:{fontSize:10}}]),this.feeInstance&&this.feeInstance.setOption(l,{notMerge:!0})}filterFee(n){const l=[];if(n)for(const t of n)l.push({value:t.times,name:t.resOriginName});else this.noFlowfee=!0;return l}}var v=e.sb({encapsulation:0,styles:[[".mini-chart[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}"]],data:{}});function x(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,2,"div",[["style","position: absolute;top:0;left:20px;"]],null,null,null,null,null)),(n()(),e.Mb(1,null,["",""])),e.Gb(131072,i.i,[i.j,e.h])],null,function(n,l){n(l,1,0,e.Nb(l,1,0,e.Eb(l,2).transform("MONITOR.NO_DATA")))})}function C(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,4,"div",[["class","mini-chart"]],null,null,null,null,null)),(n()(),e.ub(1,0,null,null,1,"div",[["class","fee-chart"],["echarts",""],["style","width:250px;height:120px;left:-10px;"],["theme","macarons"]],null,[[null,"chartInit"]],function(n,l,t){var e=!0;return"chartInit"===l&&(e=!1!==n.component.onChartInit(t)&&e),e},null,null)),e.tb(2,5193728,null,0,m.b,[e.k,e.y],{options:[0,"options"],theme:[1,"theme"]},{chartInit:"chartInit"}),(n()(),e.jb(16777216,null,null,1,null,x)),e.tb(4,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,2,0,t.feeOption,"macarons"),n(l,4,0,t.noFlowfee)},null)}var y=t("lzlj");t("mssL"),t("RKaY"),t("A2rR"),t("+A7u"),t("s6ns"),t.d(l,"a",function(){return w}),t.d(l,"b",function(){return B});var w=e.sb({encapsulation:0,styles:[[".dialog-container[_ngcontent-%COMP%]{height:100%;position:relative;width:100%}.cards-container[_ngcontent-%COMP%]{margin-bottom:30px;justify-content:flex-start;display:flex;flex-wrap:wrap;padding:5px 8px}.cards-container[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{text-overflow:ellipsis;width:110px;overflow:hidden;text-align:center;font-size:14px}.cards-container[_ngcontent-%COMP%]   .card-version[_ngcontent-%COMP%], .cards-container[_ngcontent-%COMP%]   .resolution[_ngcontent-%COMP%]{text-overflow:ellipsis;width:100%;overflow-x:hidden;font-size:12px;margin-top:0}.cards-container[_ngcontent-%COMP%]   .card-version[_ngcontent-%COMP%]{flex:5}.cards-container[_ngcontent-%COMP%]   .resolution[_ngcontent-%COMP%]{flex:6}.cards-container[_ngcontent-%COMP%]   .card-switch[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;width:100px;height:35px}.cards-container[_ngcontent-%COMP%]   .camera-setting[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.choose-terminal[_ngcontent-%COMP%]{position:relative;display:inline-block;width:265px;height:335px;margin:8px;padding:10px}.choose-terminal[_ngcontent-%COMP%]:hover{background-color:#d8dde4;border-color:#d8dde4;cursor:pointer}.online[_ngcontent-%COMP%]{background-color:#e8f0fe;text-align:center}.offline[_ngcontent-%COMP%]{background-color:#f5f7fa;text-align:center}.uninitialized[_ngcontent-%COMP%]{text-align:center}.no-result[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:240px;font-size:18px;color:#ddd}.terminal-image[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:80px}.terminal-content[_ngcontent-%COMP%]{width:100%;font-size:12px}.terminal-content[_ngcontent-%COMP%]   .card-information[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.terminal-thumbnail[_ngcontent-%COMP%]{position:absolute;top:16px;left:10px;width:60px;height:41px}.term-online[_ngcontent-%COMP%]{color:#5cb85c}.term-uninit[_ngcontent-%COMP%]{color:#f5f7fa}.selected[_ngcontent-%COMP%]{background-color:#d8dde4;border-color:#d8dde4}.terminal-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative}"]],data:{}});function T(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,3,"div",[["class","no-result"]],null,null,null,null,null)),(n()(),e.ub(1,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.Mb(2,null,["",""])),e.Gb(131072,i.i,[i.j,e.h])],null,function(n,l){n(l,2,0,e.Nb(l,2,0,e.Eb(l,3).transform("TERMINAL.HAVE_NO_TERMINAL")))})}function P(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,5,"mat-card-subtitle",[["class","card-title mat-card-subtitle"]],null,null,null,null,null)),e.Jb(512,null,u.B,u.C,[e.r,e.s,e.k,e.E]),e.tb(2,278528,null,0,u.l,[u.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.tb(3,16384,null,0,a.h,[],null,null),(n()(),e.Mb(4,null,["",""])),e.Gb(131072,i.i,[i.j,e.h])],function(n,l){n(l,2,0,"card-title",l.component.isOnline(l.parent.context.$implicit.status))},function(n,l){n(l,4,0,e.Nb(l,4,0,e.Eb(l,5).transform("MONITOR."+l.parent.context.$implicit.status)))})}function N(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,3,"mat-card-subtitle",[["class","card-title mat-card-subtitle"],["style","background-color: orange;"]],null,[[null,"click"]],function(n,l,t){var e=!0,i=n.component;return"click"===l&&(t.stopPropagation(),e=!1!==i.displayAnalyse(i.outError.reasons)&&e),e},null,null)),e.tb(1,16384,null,0,a.h,[],null,null),(n()(),e.Mb(2,null,["",""])),e.Gb(131072,i.i,[i.j,e.h])],null,function(n,l){n(l,2,0,e.Nb(l,2,0,e.Eb(l,3).transform("MONITOR.ERROR")))})}function A(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),e.ub(1,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.Mb(2,null,["",": \xa0\xa0"])),e.Gb(131072,i.i,[i.j,e.h]),(n()(),e.ub(4,0,null,null,5,"mat-slide-toggle",[["class","example-margin mat-slide-toggle"],["color","primary"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"]],function(n,l,t){var i=!0,u=n.component;return"focus"===l&&(i=!1!==e.Eb(n,5)._inputElement.nativeElement.focus()&&i),"ngModelChange"===l&&(i=!1!==(n.parent.context.$implicit.monitor=t)&&i),"ngModelChange"===l&&(i=!1!==u.setMonitor(t,n.parent.context.$implicit)&&i),i},o.b,o.a)),e.tb(5,1228800,null,0,r.b,[e.k,s.h,e.h,[8,null],e.y,r.a,[2,c.a],[2,d.b]],{disabled:[0,"disabled"],color:[1,"color"]},null),e.Jb(1024,null,b.p,function(n){return[n]},[r.b]),e.tb(7,671744,null,0,b.u,[[8,null],[8,null],[8,null],[6,b.p]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),e.Jb(2048,null,b.q,null,[b.u]),e.tb(9,16384,null,0,b.r,[[4,b.q]],null,null)],function(n,l){n(l,5,0,"Online"!==l.parent.context.$implicit.status,"primary"),n(l,7,0,"Online"!==l.parent.context.$implicit.status,l.parent.context.$implicit.monitor)},function(n,l){n(l,2,0,e.Nb(l,2,0,e.Eb(l,3).transform("MONITOR.MONITOR"))),n(l,4,1,[e.Eb(l,5).id,e.Eb(l,5).disabled?null:-1,e.Eb(l,5).checked,e.Eb(l,5).disabled,"before"==e.Eb(l,5).labelPosition,"NoopAnimations"===e.Eb(l,5)._animationMode,e.Eb(l,9).ngClassUntouched,e.Eb(l,9).ngClassTouched,e.Eb(l,9).ngClassPristine,e.Eb(l,9).ngClassDirty,e.Eb(l,9).ngClassValid,e.Eb(l,9).ngClassInvalid,e.Eb(l,9).ngClassPending])})}function S(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),e.ub(1,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.Mb(2,null,["",": \xa0\xa0"])),e.Gb(131072,i.i,[i.j,e.h]),(n()(),e.ub(4,0,null,null,5,"mat-slide-toggle",[["class","example-margin mat-slide-toggle"],["color","primary"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"]],function(n,l,t){var i=!0,u=n.component;return"focus"===l&&(i=!1!==e.Eb(n,5)._inputElement.nativeElement.focus()&&i),"ngModelChange"===l&&(i=!1!==(n.parent.context.$implicit.flowfee=t)&&i),"ngModelChange"===l&&(i=!1!==u.setFee(t,n.parent.context.$implicit)&&i),i},o.b,o.a)),e.tb(5,1228800,null,0,r.b,[e.k,s.h,e.h,[8,null],e.y,r.a,[2,c.a],[2,d.b]],{disabled:[0,"disabled"],color:[1,"color"]},null),e.Jb(1024,null,b.p,function(n){return[n]},[r.b]),e.tb(7,671744,null,0,b.u,[[8,null],[8,null],[8,null],[6,b.p]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),e.Jb(2048,null,b.q,null,[b.u]),e.tb(9,16384,null,0,b.r,[[4,b.q]],null,null)],function(n,l){n(l,5,0,"Online"!==l.parent.context.$implicit.status,"primary"),n(l,7,0,"Online"!==l.parent.context.$implicit.status,l.parent.context.$implicit.flowfee)},function(n,l){n(l,2,0,e.Nb(l,2,0,e.Eb(l,3).transform("MONITOR.FEE.FEE"))),n(l,4,1,[e.Eb(l,5).id,e.Eb(l,5).disabled?null:-1,e.Eb(l,5).checked,e.Eb(l,5).disabled,"before"==e.Eb(l,5).labelPosition,"NoopAnimations"===e.Eb(l,5)._animationMode,e.Eb(l,9).ngClassUntouched,e.Eb(l,9).ngClassTouched,e.Eb(l,9).ngClassPristine,e.Eb(l,9).ngClassDirty,e.Eb(l,9).ngClassValid,e.Eb(l,9).ngClassInvalid,e.Eb(l,9).ngClassPending])})}function k(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,1,"app-errorrate-mini-chart",[],null,[[null,"outData"]],function(n,l,t){var e=!0;return"outData"===l&&(e=!1!==n.component.rateWarn(t)&&e),e},M,E)),e.tb(1,114688,[["errorMini",4]],0,O,[p.a,g.a],{terminal:[0,"terminal"]},{outData:"outData"})],function(n,l){n(l,1,0,l.parent.parent.context.$implicit)},null)}function D(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,2,"div",[["style","position: relative;top:0;left:20px;"]],null,null,null,null,null)),(n()(),e.Mb(1,null,["",""])),e.Gb(131072,i.i,[i.j,e.h])],null,function(n,l){n(l,1,0,e.Nb(l,1,0,e.Eb(l,2).transform("MONITOR.Uninitialized")))})}function j(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),e.jb(16777216,null,null,1,null,k)),e.tb(2,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.jb(16777216,null,null,1,null,D)),e.tb(4,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,l.parent.context.$implicit.monitor),n(l,4,0,!l.parent.context.$implicit.monitor)},null)}function $(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,1,"app-fee-chart",[],null,null,null,C,v)),e.tb(1,114688,null,0,_,[I.a],{terminal:[0,"terminal"]},null)],function(n,l){n(l,1,0,l.parent.parent.context.$implicit)},null)}function U(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,2,"div",[["style","position: relative;top:0;left:20px;"]],null,null,null,null,null)),(n()(),e.Mb(1,null,["",""])),e.Gb(131072,i.i,[i.j,e.h])],null,function(n,l){n(l,1,0,e.Nb(l,1,0,e.Eb(l,2).transform("MONITOR.Uninitialized")))})}function G(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),e.jb(16777216,null,null,1,null,$)),e.tb(2,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.jb(16777216,null,null,1,null,U)),e.tb(4,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,2,0,l.parent.context.$implicit.flowfee),n(l,4,0,!l.parent.context.$implicit.flowfee)},null)}function H(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,63,"mat-card",[["class","choose-terminal mat-card"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(n.component.drawData(n.context.$implicit),e=!1!==t.stopPropagation()&&e),e},y.d,y.a)),e.Jb(512,null,u.B,u.C,[e.r,e.s,e.k,e.E]),e.tb(2,278528,null,0,u.l,[u.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Hb(3,{selected:0}),e.tb(4,49152,null,0,a.a,[],null,null),(n()(),e.ub(5,0,null,0,15,"div",[["class","terminal-card-header"]],null,null,null,null,null)),(n()(),e.ub(6,0,null,null,6,"div",[["class","terminal-image"]],null,null,null,null,null)),(n()(),e.ub(7,0,null,null,4,"i",[["class","material-icons"]],null,null,null,null,null)),e.Jb(512,null,u.B,u.C,[e.r,e.s,e.k,e.E]),e.tb(9,278528,null,0,u.l,[u.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Hb(10,{"term-online":0,"term-offline":1,"term-uninit":2}),(n()(),e.Mb(-1,null,[" tv "])),(n()(),e.ub(12,0,null,null,0,"img",[["alt","screenshot"],["class","terminal-thumbnail"]],[[8,"src",4]],[[null,"error"]],function(n,l,t){var e=!0;return"error"===l&&(e=!1!==n.component.setDefaultImg(n.context.$implicit)&&e),e},null,null)),(n()(),e.ub(13,0,null,null,7,"div",[["class","terminal-info"]],null,null,null,null,null)),(n()(),e.ub(14,0,null,null,2,"mat-card-title",[["class","card-title mat-card-title"]],null,null,null,null,null)),e.tb(15,16384,null,0,a.i,[],null,null),(n()(),e.Mb(16,null,["",""])),(n()(),e.jb(16777216,null,null,1,null,P)),e.tb(18,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.jb(16777216,null,null,1,null,N)),e.tb(20,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ub(21,0,null,0,40,"mat-card-content",[["class","terminal-content mat-card-content"]],null,null,null,null,null)),e.tb(22,16384,null,0,a.d,[],null,null),(n()(),e.ub(23,0,null,null,8,"div",[["class","card-information"]],null,null,null,null,null)),(n()(),e.ub(24,0,null,null,3,"mat-card-title",[["class","card-version mat-card-title"]],null,null,null,null,null)),e.tb(25,16384,null,0,a.i,[],null,null),(n()(),e.Mb(26,null,["",": \xa0",""])),e.Gb(131072,i.i,[i.j,e.h]),(n()(),e.ub(28,0,null,null,3,"mat-card-title",[["class","resolution mat-card-title"]],null,null,null,null,null)),e.tb(29,16384,null,0,a.i,[],null,null),(n()(),e.Mb(30,null,["",": \xa0",""])),e.Gb(131072,i.i,[i.j,e.h]),(n()(),e.ub(32,0,null,null,4,"div",[["class","card-switch"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==t.stopPropagation()&&e),e},null,null)),(n()(),e.jb(16777216,null,null,1,null,A)),e.tb(34,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.jb(16777216,null,null,1,null,S)),e.tb(36,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ub(37,0,null,null,15,"div",[["class","camera-setting"]],null,null,null,null,null)),(n()(),e.ub(38,0,null,null,14,"div",[["class","wrapper"]],null,null,null,null,null)),(n()(),e.ub(39,0,null,null,9,"div",[["class","auto-upload-switch"]],null,null,null,null,null)),(n()(),e.ub(40,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.Mb(41,null,["",": \xa0\xa0"])),e.Gb(131072,i.i,[i.j,e.h]),(n()(),e.ub(43,0,null,null,5,"mat-slide-toggle",[["class","example-margin mat-slide-toggle"],["color","primary"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"focus"]],function(n,l,t){var i=!0,u=n.component;return"focus"===l&&(i=!1!==e.Eb(n,44)._inputElement.nativeElement.focus()&&i),"ngModelChange"===l&&(i=!1!==u.setCameraAutoUpload(t,n.context.$implicit)&&i),i},o.b,o.a)),e.tb(44,1228800,null,0,r.b,[e.k,s.h,e.h,[8,null],e.y,r.a,[2,c.a],[2,d.b]],{disabled:[0,"disabled"],color:[1,"color"]},null),e.Jb(1024,null,b.p,function(n){return[n]},[r.b]),e.tb(46,671744,null,0,b.u,[[8,null],[8,null],[8,null],[6,b.p]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),e.Jb(2048,null,b.q,null,[b.u]),e.tb(48,16384,null,0,b.r,[[4,b.q]],null,null),(n()(),e.ub(49,0,null,null,3,"span",[["class","more"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(n.component.cameraMore(n.context.$implicit),e=!1!==t.stopPropagation()&&e),e},null,null)),(n()(),e.ub(50,0,null,null,2,"a",[],null,null,null,null,null)),(n()(),e.Mb(51,null,["",""])),e.Gb(131072,i.i,[i.j,e.h]),(n()(),e.ub(53,0,null,null,3,"div",[["class","card-version"]],null,null,null,null,null)),(n()(),e.ub(54,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),e.Mb(55,null,["",": "])),e.Gb(131072,i.i,[i.j,e.h]),(n()(),e.ub(57,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),e.jb(16777216,null,null,1,null,j)),e.tb(59,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.jb(16777216,null,null,1,null,G)),e.tb(61,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.ub(62,0,null,0,1,"mat-card-actions",[["class","mat-card-actions"]],[[2,"mat-card-actions-align-end",null]],null,null,null,null)),e.tb(63,16384,null,0,a.b,[],null,null)],function(n,l){var t=l.component,e=n(l,3,0,t.current&&l.context.$implicit.id===t.current.id);n(l,2,0,"choose-terminal",e);var i=n(l,10,0,"Online"==l.context.$implicit.status,"Offline"==l.context.$implicit.status,"Uninitialized"==l.context.$implicit.status);n(l,9,0,"material-icons",i),n(l,18,0,!t.outError[l.context.$implicit.id]&&1!==t.outError[l.context.$implicit.id]),n(l,20,0,t.outError[l.context.$implicit.id]&&1===t.outError[l.context.$implicit.id]),n(l,34,0,"monitor"===t.template),n(l,36,0,"fee"===t.template),n(l,44,0,"Online"!==l.context.$implicit.status,"primary"),n(l,46,0,"Online"!==l.context.$implicit.status,l.context.$implicit.cameraConfig.auto_upload),n(l,59,0,"monitor"===t.template),n(l,61,0,"fee"===t.template)},function(n,l){var t=l.component;n(l,12,0,e.wb(1,"",null==l.context.$implicit?null:l.context.$implicit.imgUrl,"")),n(l,16,0,l.context.$implicit.title),n(l,26,0,e.Nb(l,26,0,e.Eb(l,27).transform("MONITOR.VERSION")),t.getVersion(l.context.$implicit)),n(l,30,0,e.Nb(l,30,0,e.Eb(l,31).transform("MONITOR.RESOLUTION")),t.getResolution(l.context.$implicit)),n(l,41,0,e.Nb(l,41,0,e.Eb(l,42).transform("MONITOR.CAMERA_AUTO_UPLOAD"))),n(l,43,1,[e.Eb(l,44).id,e.Eb(l,44).disabled?null:-1,e.Eb(l,44).checked,e.Eb(l,44).disabled,"before"==e.Eb(l,44).labelPosition,"NoopAnimations"===e.Eb(l,44)._animationMode,e.Eb(l,48).ngClassUntouched,e.Eb(l,48).ngClassTouched,e.Eb(l,48).ngClassPristine,e.Eb(l,48).ngClassDirty,e.Eb(l,48).ngClassValid,e.Eb(l,48).ngClassInvalid,e.Eb(l,48).ngClassPending]),n(l,51,0,e.Nb(l,51,0,e.Eb(l,52).transform("MONITOR.MORE"))),n(l,55,0,e.Nb(l,55,0,e.Eb(l,56).transform("MONITOR.GRAPH"))),n(l,62,0,"end"===e.Eb(l,63).align)})}function z(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,2,"div",[["class","cards-container"]],null,null,null,null,null)),(n()(),e.jb(16777216,null,null,1,null,H)),e.tb(2,278528,null,0,u.m,[e.P,e.M,e.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],function(n,l){var t=l.component;n(l,2,0,t.terminals,t.trackMonitor)},null)}function B(n){return e.Ob(0,[(n()(),e.ub(0,0,null,null,4,"div",[["class","dialog-container"]],null,null,null,null,null)),(n()(),e.jb(16777216,null,null,1,null,T)),e.tb(2,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(n()(),e.jb(16777216,null,null,1,null,z)),e.tb(4,16384,null,0,u.n,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,2,0,t.noResult),n(l,4,0,!t.loading)},null)}},mssL:function(n,l,t){"use strict";t.d(l,"a",function(){return o});var e=t("8Y7J"),i=(t("RKaY"),t("Cl/c"),t("A2rR"),t("+A7u"),t("Biuy")),u=t("/QYs"),a=t("0KPo");class o{constructor(n,l,t,i,u,a){this.terminalService=n,this.monitorService=l,this.groupService=t,this.translateService=i,this.commandService=u,this.dialog=a,this.loading=!0,this.noResult=!1,this.url404="./assets/images/404.jpeg",this.chooseTerminal=new e.m,this.outError={}}drawData(n){this.current=n,this.chooseTerminal.emit(n)}isOnline(n){let l="";switch(n){case"Online":l="online";break;case"Offline":l="offline";break;case"Uninitialized":l="uninitialized"}return l}getVersion(n){return n.post_meta._led_status.info&&n.post_meta._led_status.info.info?n.post_meta._led_status.info.info.model+" "+n.post_meta._led_status.info.info.vername:"--"}getResolution(n){const l=(((n||{}).post_meta||{})._led_status||{}).dimension||{};let t="--";return l.real_width&&l.real_height?t=l.real_width+"x"+l.real_height:l.width&&l.height&&(t=l.width+"x"+l.height),t}setDefaultImg(n){n.imgUrl=this.url404}setMonitor(n,l){let t=0;n&&(t=180),this.terminalService.postCommand(l,"monitoring_report_time",{"sensor.report.interval":t,"ber.report.interval":t},!1).subscribe(()=>{})}setFee(n,l){let t=0;n&&(t=1),this.terminalService.postCommand(l,"flowfee_switch",{status:t},!1).subscribe(()=>{})}rateWarn(n){this.outError[n.id]=1,this.outError.reasons=n.reasons}clearCurrent(){this.current=null}ngOnChanges(n){n.terminals&&(0===this.terminals.length?this.noResult=!0:(this.noResult=!1,this.loading=!1,this.clearCurrent()))}trackMonitor(n,l){return l.id?l.id:null}setCameraAutoUpload(n,l){const t=l.cameraConfig,e={exposure:t.exposure||Math.round(a.a.exposure/2),whitebalance:t.whitebalance||a.a.whitebalance,size:t.size||a.a.size,interval:t.intetval||a.a.interval,auto_upload:n?1:0,quality:a.a.quality};this.commandService.postCommand(l,"Camera_Shot_Setting",e).subscribe()}cameraMore(n){this.dialog.open(i.a,{width:"100%",height:"100%",closeOnNavigation:!0,panelClass:"my-full-screen-dialog2",disableClose:!0,data:{terminal:n}})}displayAnalyse(n){this.dialog.open(u.a,{closeOnNavigation:!0,width:"450px",height:"200px",position:{top:"200px"},data:{reasons:n}})}}}}]);